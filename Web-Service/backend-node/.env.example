# ============================================================================
# SynaptiHand - Environment Configuration
# Copy this file to .env and update with your values
# ============================================================================

# --------------------------------------------------------------------------
# Server Configuration
# --------------------------------------------------------------------------
NODE_ENV=development
PORT=5000
HOST=0.0.0.0

# --------------------------------------------------------------------------
# PostgreSQL Database
# --------------------------------------------------------------------------
# Local development
DATABASE_URL="postgresql://synaptihand:synaptihand_dev@localhost:5432/synaptihand?schema=public"

# Docker development
# DATABASE_URL="postgresql://synaptihand:synaptihand_secure_password@postgres:5432/synaptihand?schema=public"

# Production (use strong password and SSL)
# DATABASE_URL="postgresql://user:strong_password@db.example.com:5432/synaptihand?schema=public&sslmode=require"

# --------------------------------------------------------------------------
# PostgreSQL Connection Settings (for docker-compose)
# --------------------------------------------------------------------------
POSTGRES_USER=synaptihand
POSTGRES_PASSWORD=synaptihand_secure_password
POSTGRES_DB=synaptihand

# --------------------------------------------------------------------------
# Authentication
# --------------------------------------------------------------------------
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=7d

# Supabase Authentication (REQUIRED for Android app)
# Get these from: https://supabase.com/dashboard/project/_/settings/api
SUPABASE_URL=https://mtodevikkgraisalolkq.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key-here

# IMPORTANT: Android app requires users to exist in Supabase Auth
# Registration creates users in BOTH:
#  1. Supabase Auth (auth.users table) - for Android authentication
#  2. User-Main table - for application data and custom fields
# These are linked via auth_user_id field

# --------------------------------------------------------------------------
# Redis (Job Queue for Video Processing)
# --------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_DB=0

# --------------------------------------------------------------------------
# Cloud Storage (Google Cloud Storage)
# --------------------------------------------------------------------------
# Bucket name - change this for production deployment
# Testing: handpose-system
# Production: synaptihand-production (or your official bucket name)
GCS_BUCKET_NAME=handpose-system
GCS_PROJECT_ID=your-gcp-project-id

# Path to service account JSON (if not using application default credentials)
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# Bucket Structure:
# gs://{GCS_BUCKET_NAME}/Uploads-mp4/    - Video uploads from mobile
# gs://{GCS_BUCKET_NAME}/Uploads-CSV/    - Keypoint CSV from mobile
# gs://{GCS_BUCKET_NAME}/Result-Output/  - Processed outputs (pdf, xlsx, png)

# --------------------------------------------------------------------------
# CORS Configuration (Comma-separated origins)
# --------------------------------------------------------------------------
# Development (allow all)
CORS_ORIGIN=http://localhost:3000,http://localhost:4856,http://localhost:5000

# Production (restrict to your domains)
# CORS_ORIGIN=https://app.synaptihand.com

# --------------------------------------------------------------------------
# File Upload Limits
# --------------------------------------------------------------------------
MAX_FILE_SIZE=524288000
# 500MB for video uploads

# --------------------------------------------------------------------------
# Feature Flags
# --------------------------------------------------------------------------
ENABLE_MOCK_STORAGE=true
# Set to true to use local storage instead of GCS (development)

# --------------------------------------------------------------------------
# Soft-Delete & Cleanup Configuration
# --------------------------------------------------------------------------
CLEANUP_ENABLED=true
CLEANUP_RETENTION_DAYS=15
CLEANUP_CRON=0 0 2 * * *
# Cron schedule: Daily at 2 AM UTC

# --------------------------------------------------------------------------
# Logging
# --------------------------------------------------------------------------
LOG_LEVEL=info
# Options: error, warn, info, debug

# --------------------------------------------------------------------------
# Rate Limiting (requests per minute)
# --------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# --------------------------------------------------------------------------
# Email Configuration (Hostinger SMTP)
# --------------------------------------------------------------------------
# SMTP settings for email verification and notifications
SMTP_HOST=smtp.hostinger.com
SMTP_PORT=465
SMTP_SECURE=true
SMTP_USER=no-reply@synaptihand.com
SMTP_PASSWORD=your-email-password

# Email sender addresses
SMTP_FROM_NOREPLY=SynaptiHand <no-reply@synaptihand.com>
SMTP_FROM_ADMIN=SynaptiHand Admin <admin@synaptihand.com>
SMTP_FROM_SYSTEM=SynaptiHand System <system@synaptihand.com>

# Application URL (for email links)
APP_URL=https://app.synaptihand.com
